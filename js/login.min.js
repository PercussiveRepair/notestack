// JQUERY NOCONFLICT
var $ = jQuery.noConflict();

// GET URL VARS PLUGIN
// http://jquery-howto.blogspot.com/2009/09/get-url-parameters-values-with-jquery.html
$.extend({getUrlVars:function(){for(var a=[],b,d=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),c=0;c<d.length;c++)b=d[c].split("="),a.push(b[0]),a[b[0]]=b[1];return a},getUrlVar:function(a){return $.getUrlVars()[a]}});

// NOTESTACK HOMEPAGE CODE
// BRITT O'HALLORAN (britt.j.ohalloran@gmail.com)
var notestack=function(){var e=function(b,c){localStorage.setItem("email",b);$.ajax("/sn.php",{type:"POST",data:{action:"login",email:b,password:c},complete:function(a){a=$.parseJSON(a.responseText).token;a===""?($(".login_message").slideUp(200),$(".login").effect("shake",{times:3},100)):(localStorage.setItem("token",a),localStorage.setItem("tokenDate",(new Date).getTime()/1E3),window.location="/+/")},error:function(){}})};$(function(){var b,c,a,d;localStorage.email&&$(".email").val(localStorage.email);
if(localStorage.index){d=$.parseJSON(localStorage.index);a=0;for(b=0,c=d.data.length;b<c;b+=1)d.data[b].deleted===0&&(a+=1);$(".under_message").hide().html("found "+a+" local notes | <a class='clear_data' href='#'>clear local data</a>").fadeIn(2E3)}$.getUrlVar("login")==="expired"?$(".login_message").text("Your simplenote login has expired, please login again.").slideDown("fast"):localStorage.token&&($(".login_message").html('<a href="/+/" tabindex=1>'+localStorage.email+"</a>").slideDown("fast"),
$(".login_inner form").hide());$(".password").focus(function(){$(".login_message").text("press enter to login").slideDown("fast")});$(".password").keypress(function(a){a.which===13&&(e($(".email").val().trim(),$(".password").val().trim()),$(".login_message").text("authenticating").slideDown("fast"))});$(".clear_data").click(function(){localStorage.clear();window.location="/";return!1})})}();